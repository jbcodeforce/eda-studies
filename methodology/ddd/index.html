<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://jeromeboyer.net/eda-studies/methodology/ddd/ rel=canonical><link href=../event-storming/ rel=prev><link href=eda_assessment/ rel=next><link rel=icon href=../../images/logo-blue.drawio.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.14"><title>Domain driven design - Event-Driven Solutions in Hybrid Cloud - Jerome Boyer</title><link rel=stylesheet href=../../assets/stylesheets/main.342714a4.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../extra.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#domain-driven-design-summary class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Event-Driven Solutions in Hybrid Cloud - Jerome Boyer" class="md-header__button md-logo" aria-label="Event-Driven Solutions in Hybrid Cloud - Jerome Boyer" data-md-component=logo> <img src=../../images/logo.drawio.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Event-Driven Solutions in Hybrid Cloud - Jerome Boyer </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Domain driven design </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/jbcodeforce/eda-studies.git title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../concepts/eda/ class=md-tabs__link> EDA concepts </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../event-storming/ class=md-tabs__link> Methodology </a> </li> <li class=md-tabs__item> <a href=../../patterns/ class=md-tabs__link> Design patterns </a> </li> <li class=md-tabs__item> <a href=../getting-started/ class=md-tabs__link> Demonstrations </a> </li> <li class=md-tabs__item> <a href=../../techno/kafka/ class=md-tabs__link> Technologies </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Event-Driven Solutions in Hybrid Cloud - Jerome Boyer" class="md-nav__button md-logo" aria-label="Event-Driven Solutions in Hybrid Cloud - Jerome Boyer" data-md-component=logo> <img src=../../images/logo.drawio.png alt=logo> </a> Event-Driven Solutions in Hybrid Cloud - Jerome Boyer </label> <div class=md-nav__source> <a href=https://github.com/jbcodeforce/eda-studies.git title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> EDA concepts </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> EDA concepts </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../concepts/eda/ class=md-nav__link> <span class=md-ellipsis> Reference architecture </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/soa-eda/ class=md-nav__link> <span class=md-ellipsis> From SOA to EDA </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/backbone/ class=md-nav__link> <span class=md-ellipsis> Messaging backbone </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/legacy-itg/ class=md-nav__link> <span class=md-ellipsis> Legacy integration </span> </a> </li> <li class=md-nav__item> <a href=../../concepts/data-pipeline/ class=md-nav__link> <span class=md-ellipsis> Data pipeline </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Methodology </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Methodology </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../event-storming/ class=md-nav__link> <span class=md-ellipsis> Event Storming </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Domain driven design </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Domain driven design </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#getting-started class=md-nav__link> <span class=md-ellipsis> Getting started </span> </a> </li> <li class=md-nav__item> <a href=#domain-driven-design-steps class=md-nav__link> <span class=md-ellipsis> Domain driven design steps </span> </a> <nav class=md-nav aria-label="Domain driven design steps"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-assess-domains-and-sub-domains class=md-nav__link> <span class=md-ellipsis> Step 1: Assess domains and sub-domains </span> </a> </li> <li class=md-nav__item> <a href=#step-2-define-the-application-context class=md-nav__link> <span class=md-ellipsis> Step 2: Define the application context </span> </a> </li> <li class=md-nav__item> <a href=#step-3-define-the-ubiquitous-language class=md-nav__link> <span class=md-ellipsis> Step 3: Define the ubiquitous language </span> </a> </li> <li class=md-nav__item> <a href=#step-4-define-modules class=md-nav__link> <span class=md-ellipsis> Step 4: Define modules </span> </a> </li> <li class=md-nav__item> <a href=#step-5-limit-the-context-and-scope-for-this-particular-build-sprint class=md-nav__link> <span class=md-ellipsis> Step 5: Limit the context and scope for this particular build / sprint </span> </a> </li> <li class=md-nav__item> <a href=#step-6-generate-microservice-interaction-diagrams-for-the-build class=md-nav__link> <span class=md-ellipsis> Step 6: Generate microservice interaction diagrams for the build </span> </a> </li> <li class=md-nav__item> <a href=#step-7-test-drivent-development-meets-ddd class=md-nav__link> <span class=md-ellipsis> Step 7: Test Drivent Development meets DDD </span> </a> </li> <li class=md-nav__item> <a href=#step-8-address-failover-and-other-nfrs class=md-nav__link> <span class=md-ellipsis> Step 8: Address failover and other NFRs </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#concepts-and-rationale-underlying-the-design-approach class=md-nav__link> <span class=md-ellipsis> Concepts and rationale underlying the design approach </span> </a> </li> <li class=md-nav__item> <a href=#more-reading-and-sources class=md-nav__link> <span class=md-ellipsis> More reading and sources </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=eda_assessment/ class=md-nav__link> <span class=md-ellipsis> EDA Assessment </span> </a> </li> <li class=md-nav__item> <a href=../event-storming/vaccine-dt-es-ddd/ class=md-nav__link> <span class=md-ellipsis> Vaccine Examples </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Design patterns </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Design patterns </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../patterns/ class=md-nav__link> <span class=md-ellipsis> Common patterns </span> </a> </li> <li class=md-nav__item> <a href=../../patterns/events-versus-messages/ class=md-nav__link> <span class=md-ellipsis> Messaging vs events </span> </a> </li> <li class=md-nav__item> <a href=../../patterns/model/ class=md-nav__link> <span class=md-ellipsis> Devising the data models </span> </a> </li> <li class=md-nav__item> <a href=../../patterns/api-mgt/ class=md-nav__link> <span class=md-ellipsis> API management </span> </a> </li> <li class=md-nav__item> <a href=../../patterns/saga/ class=md-nav__link> <span class=md-ellipsis> Saga </span> </a> </li> <li class=md-nav__item> <a href=../../patterns/event-sourcing/ class=md-nav__link> <span class=md-ellipsis> Event Sourcing </span> </a> </li> <li class=md-nav__item> <a href=../../patterns/cqrs/ class=md-nav__link> <span class=md-ellipsis> CQRS </span> </a> </li> <li class=md-nav__item> <a href=../../patterns/reactive/ class=md-nav__link> <span class=md-ellipsis> Reactive </span> </a> </li> <li class=md-nav__item> <a href=../../patterns/flow-architectures/ class=md-nav__link> <span class=md-ellipsis> Flow architecture </span> </a> </li> <li class=md-nav__item> <a href=../../patterns/dlq/ class=md-nav__link> <span class=md-ellipsis> Dead letter queue </span> </a> </li> <li class=md-nav__item> <a href=../../patterns/data-lineage/ class=md-nav__link> <span class=md-ellipsis> Data lineage </span> </a> </li> <li class=md-nav__item> <a href=../../patterns/governance/ class=md-nav__link> <span class=md-ellipsis> Governance </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Demonstrations </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Demonstrations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../getting-started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class=md-nav__item> <a href=../../techno/kafka/playground/ class=md-nav__link> <span class=md-ellipsis> Sandbox notes </span> </a> </li> <li class=md-nav__item> <a href=../../solutions/gitops_IaC/ class=md-nav__link> <span class=md-ellipsis> GitOps - IaC </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/eda-rt-inventory/ class=md-nav__link> <span class=md-ellipsis> Real-time Inventory </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0> <span class=md-ellipsis> Technologies </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Technologies </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../techno/kafka/ class=md-nav__link> <span class=md-ellipsis> Kafka </span> </a> </li> <li class=md-nav__item> <a href=../../techno/kafka/faq/ class=md-nav__link> <span class=md-ellipsis> Kafka FAQ </span> </a> </li> <li class=md-nav__item> <a href=../../techno/kafka/producer/ class=md-nav__link> <span class=md-ellipsis> Kafka Producer </span> </a> </li> <li class=md-nav__item> <a href=../../techno/kafka/consumer/ class=md-nav__link> <span class=md-ellipsis> Kafka Consumer </span> </a> </li> <li class=md-nav__item> <a href=../../techno/kafka/security/ class=md-nav__link> <span class=md-ellipsis> Kafka Security </span> </a> </li> <li class=md-nav__item> <a href=../../techno/avro-schemas/ class=md-nav__link> <span class=md-ellipsis> Schema Mgt </span> </a> </li> <li class=md-nav__item> <a href=../../techno/kstreams/ class=md-nav__link> <span class=md-ellipsis> Kafka Streams </span> </a> </li> <li class=md-nav__item> <a href=../../techno/kafka-connect/ class=md-nav__link> <span class=md-ellipsis> Kafka Connect </span> </a> </li> <li class=md-nav__item> <a href=../../techno/confluent/ class=md-nav__link> <span class=md-ellipsis> Confluent </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/redpanda-studies/ class=md-nav__link> <span class=md-ellipsis> RedPanda </span> </a> </li> <li class=md-nav__item> <a href=../../techno/mirrormaker/ class=md-nav__link> <span class=md-ellipsis> Mirror Maker 2 </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/flink-studies class=md-nav__link> <span class=md-ellipsis> Flink </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/aws-messaging-study/activemq/ class=md-nav__link> <span class=md-ellipsis> Active MQ </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/aws-messaging-study/rabbitmq/ class=md-nav__link> <span class=md-ellipsis> Rabbit MQ </span> </a> </li> <li class=md-nav__item> <a href=../../solutions/autonomous-car/es-duplicate-evt/ class=md-nav__link> <span class=md-ellipsis> AWS duplicate with EB </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/yarfba/kinesis class=md-nav__link> <span class=md-ellipsis> AWS Kinesis </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/yarfba/serverless/msk class=md-nav__link> <span class=md-ellipsis> AWS MSK </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/aws-messaging-study class=md-nav__link> <span class=md-ellipsis> AWS messaging </span> </a> </li> <li class=md-nav__item> <a href=https://jbcodeforce.github.io/aws-messaging-study/sqs/ class=md-nav__link> <span class=md-ellipsis> AWS SQS </span> </a> </li> <li class=md-nav__item> <a href=../../ibm-assets/ class=md-nav__link> <span class=md-ellipsis> IBM Assets </span> </a> </li> <li class=md-nav__item> <a href=../../techno/ibm-mq/ class=md-nav__link> <span class=md-ellipsis> IBM MQ </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#getting-started class=md-nav__link> <span class=md-ellipsis> Getting started </span> </a> </li> <li class=md-nav__item> <a href=#domain-driven-design-steps class=md-nav__link> <span class=md-ellipsis> Domain driven design steps </span> </a> <nav class=md-nav aria-label="Domain driven design steps"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-assess-domains-and-sub-domains class=md-nav__link> <span class=md-ellipsis> Step 1: Assess domains and sub-domains </span> </a> </li> <li class=md-nav__item> <a href=#step-2-define-the-application-context class=md-nav__link> <span class=md-ellipsis> Step 2: Define the application context </span> </a> </li> <li class=md-nav__item> <a href=#step-3-define-the-ubiquitous-language class=md-nav__link> <span class=md-ellipsis> Step 3: Define the ubiquitous language </span> </a> </li> <li class=md-nav__item> <a href=#step-4-define-modules class=md-nav__link> <span class=md-ellipsis> Step 4: Define modules </span> </a> </li> <li class=md-nav__item> <a href=#step-5-limit-the-context-and-scope-for-this-particular-build-sprint class=md-nav__link> <span class=md-ellipsis> Step 5: Limit the context and scope for this particular build / sprint </span> </a> </li> <li class=md-nav__item> <a href=#step-6-generate-microservice-interaction-diagrams-for-the-build class=md-nav__link> <span class=md-ellipsis> Step 6: Generate microservice interaction diagrams for the build </span> </a> </li> <li class=md-nav__item> <a href=#step-7-test-drivent-development-meets-ddd class=md-nav__link> <span class=md-ellipsis> Step 7: Test Drivent Development meets DDD </span> </a> </li> <li class=md-nav__item> <a href=#step-8-address-failover-and-other-nfrs class=md-nav__link> <span class=md-ellipsis> Step 8: Address failover and other NFRs </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#concepts-and-rationale-underlying-the-design-approach class=md-nav__link> <span class=md-ellipsis> Concepts and rationale underlying the design approach </span> </a> </li> <li class=md-nav__item> <a href=#more-reading-and-sources class=md-nav__link> <span class=md-ellipsis> More reading and sources </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=domain-driven-design-summary>Domain Driven Design Summary<a class=headerlink href=#domain-driven-design-summary title="Permanent link">&para;</a></h1> <p>This article summarizes the domain driven design methodology to implement and event-driven solution and describes the high level project steps from the <a href=../event-storming/ >Event storming</a> session to microservices design specifications.</p> <p>Domain-driven design was deeply described in <a href="https://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215/ref=asc_df_0321125215">Eric Evans's "Domain Driven Design: Tackling Complexity in the Heart of Software" book</a> in 2004.</p> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>Domain Driven Design is about understanding the business domain in which the solution has to be developed. The goals for the design may be summarized as:</p> <ul> <li>Improve communication between subject matter experts and developer, make the code readable by human and for long term maintainability. </li> <li>Support highly modular cloud native microservices.</li> <li>Adopt event-coupled microservices - facilitating independent modification and evolution of each microservice separately.</li> <li>Allow applying event-driven patterns such as event sourcing, CQRS and SAGA to address some of the challenges of distributed system implementation: data consitency, transaction cross domains, and complex queries between aggregates managed by different services.</li> <li>Domain Context is important, and used to define the business term definitions within it, to get a unique definition of the main business concepts.</li> <li>For microservice implementation, we need to find the boundary of responsability within the domain, to be able to apply a clear separation of concern pattern. </li> </ul> <p>DDD suits better long term projects, where the domain of knowledge is important and complex, and may be less appropriate for small projects.</p> <h2 id=getting-started>Getting started<a class=headerlink href=#getting-started title="Permanent link">&para;</a></h2> <p>The event-storming methodology is used to model the to-be scenario with an end-to-end business process discovery. Discovering events using event storming simplifies the process discovery and sequencing of tasks. BPMN modeling may also being used to model a process but it has the tendency to lock the thinking in a flow, while event storming focuses on what happened as facts, and so it easier to get events sequencing. </p> <p>Also events coming from no-where could still be discovered and have their value. Event storming workshop helps to identify domain driven design elements such as:</p> <ul> <li>Domains - sub domains</li> <li>Event Sequence flow.</li> <li>Events – business term definition: the start of ubiquitous language.</li> <li>Critical events.</li> <li>Business entities, aggregates, value objects</li> <li>Commands</li> <li>Actors - Users – based on Empathy maps and stakeholders list.</li> <li>Event linkages.</li> <li>Business Policies.</li> <li>Event prediction and probability flows.</li> </ul> <p><img alt="Event Storming Order" src=images/event-storming-order.png></p> <p>From there, we complement the first analysis by extending it with the domain driven design elements.</p> <h2 id=domain-driven-design-steps>Domain driven design steps<a class=headerlink href=#domain-driven-design-steps title="Permanent link">&para;</a></h2> <h3 id=step-1-assess-domains-and-sub-domains>Step 1: Assess domains and sub-domains<a class=headerlink href=#step-1-assess-domains-and-sub-domains title="Permanent link">&para;</a></h3> <p><strong>Domain</strong> is what an organization does, and it includes the "how to", it performs its operations.<br> Domain may be composed of sub-domains. A "Core" domain is a part of the business domain that is of primary importance to the success of the organization, the organization needs to excel at it, to make business impact and difference. The application to be built is within a domain.</p> <p><strong>Domain model</strong> is a conceptual object model representing part of the domain to be used in the solution. It includes behavior and data.</p> <p>During the event storming analysis, we define the domains and groups a set of sub-domains together. </p> <p>Core domains represent what will differentiate the company business value. Domains are decomposed in sub-domains. Supporting domains may be integrated and are not core to the main business, but support business processes. Payment for example are classically delegated to SaaS provider or Financial providers.</p> <p>In the following figure, the container shipping domain is what the application we have to develop belongs to, and is composed of sub-domains like order, shipping, inventory, .... Other domains like weather, CRM, invoice, are supporting the shipping domain but are not the focus of the design. Here is an example of such domain and subdomains:</p> <p><img alt="DDD Subdomains" src=images/domain-subdomains.png></p> <p>We have three core sub-domains and the rest are supports. Shipping over seas company needs to excel at managing container inventory, managing the shipping, the itineraries, and vessels.</p> <h3 id=step-2-define-the-application-context>Step 2: Define the application context<a class=headerlink href=#step-2-define-the-application-context title="Permanent link">&para;</a></h3> <p>At the high level, when doing the analysis, we should have some insight decisions of the top level application to develop, with some ideas of the other systems to interact with. A classical "system context diagram" is a efficient tool to represent the application this high level context. The external systems to integrate with, are strongly correlated to the domains discovered from previous step. </p> <p>Each interface to those system needs to be documented using the <a href="https://developer.ibm.com/articles/mw-1606-clark-trs/?mhsrc=ibmsearch_a&mhq=kim%20clark">interface characteristics approach</a> presented by Kim Clark from IBM.</p> <h4 id=interface-characteristics>Interface Characteristics<a class=headerlink href=#interface-characteristics title="Permanent link">&para;</a></h4> <p>The full set of interface characteristics to consider for each system to integrate with is summarized below:</p> <ul> <li> <p>FUNCTIONAL DEFINITION</p> <ul> <li>Principal data objects</li> <li>Operation/function</li> <li>Read or change</li> <li>Request/response objects</li> </ul> </li> <li> <p>TECHNICAL INTERFACE</p> <ul> <li>Transport</li> <li>Protocol</li> <li>Data format</li> </ul> </li> <li> <p>INTERACTION TYPE</p> <ul> <li>Request-response or fire-forget</li> <li>Thread-blocking or asynchronous</li> <li>Batch or individual</li> <li>Message size</li> </ul> </li> <li> <p>PERFORMANCE</p> <ul> <li>Response times</li> <li>Throughput</li> <li>Volumes</li> <li>Concurrency</li> </ul> </li> <li> <p>INTEGRITY</p> <ul> <li>Validation</li> <li>Transactionality</li> <li>Statefulness</li> <li>Event sequence</li> <li>Idempotence</li> </ul> </li> <li> <p>SECURITY</p> <ul> <li>Identity/authentication</li> <li>Authorization</li> <li>Data ownership</li> <li>Privacy</li> </ul> </li> <li> <p>RELIABILITY</p> <ul> <li>Availability</li> <li>Delivery assurance</li> </ul> </li> <li> <p>ERROR HANDLING</p> <ul> <li>Error management capabilities</li> <li>Known exception conditions</li> <li>Unexpected error presentation</li> </ul> </li> </ul> <p>So with a system context diagram and interface characteristics to external system we have a good undestanding of the application context and interaction with external domains.</p> <h3 id=step-3-define-the-ubiquitous-language>Step 3: Define the ubiquitous language<a class=headerlink href=#step-3-define-the-ubiquitous-language title="Permanent link">&para;</a></h3> <p>Eric Evans wrote: <em>"To communicate effectively, the code must be based on the same language used to write the requirements, the same language the developers speak with each other and with domain experts"</em></p> <p>This is where the work from the event storming and the relation with the business experts should help. Domain experts use their jargon while technical team members have their own language tuned for discussing the domain in terms of design. The terminology of day-to-day discussions is disconnected from the terminology embedded in the code, so the ubiquitous language helps to allign knowledge with design elements, code and tests. (Think about technology and Java Eenterprise Edition design patterns jargon versus ShippingOrder, order provisioning, fullfillment... )</p> <p>The vocabulary of that ubiquitous language includes the class names and prominent operation names. The language includes terms to discuss rules that have been made explicit in the model. Be sure to commit the team to exercising that language relentlessly in all communication within the business and in the code. Use the same language in diagrams, writing, and especially speech.</p> <p>Play with the model as we talk about the system. Describe scenarios out loud using the elements and interactions of the model, combining concepts in ways allowed by the model. Find easier ways to say what we need to say, and then take those new ideas back down to the diagrams and code.</p> <h4 id=entities-and-value-objects>Entities and Value Objects<a class=headerlink href=#entities-and-value-objects title="Permanent link">&para;</a></h4> <p><strong>Entities</strong> are part of the ubiquitous language, and represent business concepts that can be uniquely identified by some attributes. They have a life cycle that is important to model, specially in the context of an event-driven solution.</p> <p><strong>Value Objects</strong> represent things in the domain but without identity, and they are frequently transient, created for an operation and then discarded.</p> <p>Some time, in a certain context, a value object could become an entity. As an example, an Order will be a value object in the context of a Fullfilment domain, while a core entity in order management domain.</p> <p>Below is an example of entities (Customer and Shipping Order) and value objects (delivery history and delivery specification):</p> <p><img alt=4 src=images/ent-vo.png></p> <h4 id=aggregate-boundaries>Aggregate boundaries<a class=headerlink href=#aggregate-boundaries title="Permanent link">&para;</a></h4> <p>An <strong>aggregate</strong> is a cluster of associated objects that we treat as a unit for the purpose of data changes. It is a collection of values and entities which are bound together by a root entity (the <em>aggregate root</em>). An entity is most likely an aggregate and every things related to it, define its boundaries. External clients consider the aggregate as a all. It guaranteees the consistency of changes made within the aggregate.</p> <h4 id=bounded-contexts>Bounded Contexts<a class=headerlink href=#bounded-contexts title="Permanent link">&para;</a></h4> <p><strong>Bounded Context</strong> explicitly defines the boundaries of our model. A language in one bounded context can model the business domain for the solving of a particular problem. </p> <p>This concept is critical in large software projects. </p> <p>A Bounded Context sets the limits around what a specific team works on and helps them to define their own vocabulary within that particular context. When we define a bounded context, we define who uses it, how they use it, where it applies within a larger application context, and what it consists of, in terms of things like OpenAPI documentation and code repositories.</p> <p>Within a business context every use of a given domain terms, phrases, or sentences, <strong>the Ubiquitous Language</strong>, inside the boundary has a specific contextual meaning. So <em>order context</em> is a bounded context and groups order, ordered product type, pickup and shipping addresses, delivery specifications, delivery history....</p> <h4 id=context-maps>Context maps<a class=headerlink href=#context-maps title="Permanent link">&para;</a></h4> <p>Bounded contexts are not independent, a solution uses multiple bounded contexts, which are interacting with each others. The touchpoint between business contexts is a <strong>contract</strong>.</p> <p>To define relationships and integrations between bounded contexts we can consider the nature of the collaboration between teams, which can be grouped as:</p> <ul> <li><strong>Cooperation</strong>: Uses well established communication and control. Change to the APIs are immediately communicated, the integration is both ways and teams solve together integration issues. If more formal cooperation is needed, the <em>shared kernel</em> pattern can be used and technic like contract testing is used. Sometime the shared kernel can be deployed a mediation flow, canonical model in enterprise service bus. But the scope has to be small anyway.</li> <li><strong>Customer-supplier</strong>: the supplier context provides a service to its customers. Upstream or the downstream team can dictate the integration contract. With <em>conformist</em> supplier defines the contract based on its model and domain, and customer conforms to it. When the customer needs to translate the upstream bounded context model into its own model, it uses <strong>anticorruption layer</strong>. Anticorruption layer helps to isolate from messy model, model with high velocity of changes, or when the consumer model is core to its operations. When power is on the consumer side, then the supplier uses <em>open-host service</em> by decoupling its interface from the implementation, and design it for the consumer. This is the <em>published language</em>.</li> <li><strong>Separate ways</strong>: no collaboration at all. Which leads to duplicate functionality in multiple bounded contexts. Avoid this solution when integrating sub-domains.</li> </ul> <p>The context map illustrates the integration between bounded contexts. It is the first high level design of the system components and the models they implement.</p> <p>The diagram below represents a simple view of e-commerce domain with the sub domains and bounded contexts</p> <p><img alt src=images/context-map.png></p> <h4 id=business-operation-api>Business operation API<a class=headerlink href=#business-operation-api title="Permanent link">&para;</a></h4> <p>As part of the commands discovered during the event storming, some of them are related to business operations that could be managed and have business objective in term of cost control or new revenu stream. </p> <p>If needed, some more specific requirement about the APIs can be formalized by capturing all key aspects of API adoption with a lean approach.</p> <p>The characteristics to consider for a development point of view and DDD are:</p> <ul> <li>API product description</li> <li>SLA and expected performance </li> <li>Exposure to developer communities</li> <li>Expected short, medium and long term API management and versioning strategy</li> </ul> <p>For an implementation point of view, when mapping API to RESTful resource the data and verbs need to be defined, When APIs are asynchronous, the description of the delivery channel becomes important.</p> <h4 id=repositories>Repositories<a class=headerlink href=#repositories title="Permanent link">&para;</a></h4> <p><strong>Repository</strong> represents the infrastructure service to persist the root aggregate during its full life cycle. Client applications request objects from the repository using query methods that select objects based on criteria specified by the client, typically the value of certain attributes. Application logic never accesses storage implementation directly, only via the repository.</p> <h4 id=event-linked-microservices-design-structure>Event linked microservices design - structure<a class=headerlink href=#event-linked-microservices-design-structure title="Permanent link">&para;</a></h4> <p>A complete event-driven microservice specification (the target of this design step) includes specifications of the following elements:</p> <ul> <li> <p>Event Topics</p> <ul> <li>Used to configure the Event Backbone</li> <li>Mapped to the life cycle of the root entity</li> <li>Topics can be chained to address different consumer semantic</li> <li>Single partition for keeping order and support exactly once delivery</li> </ul> </li> <li> <p>Event types within each event topic</p> </li> <li> <p>Microservices:</p> <ul> <li>They may be finer grained than aggregates or mapped to aggregate boundaries.</li> <li>They may separate query and command; possibly multiple queries.</li> <li>They could define demonstration control and serve main User Interface.</li> <li>Reference the related Entities and value objects within each microservice.</li> <li>Define APIs ( Synchronous or asynchronous) using standards like openAPI. Could be done bottom up from the code, as most of TDD implementation will lead to.</li> <li>Topics and events Subscribed to.</li> <li>Events published / emitted.</li> </ul> </li> <li> <p>List of end to end interactions:</p> <ul> <li>List of logic segments per microservice</li> </ul> </li> <li> <p>Recovery processing, scaling:</p> <ul> <li>We expect this to be highly patterned and template driven not requiring example-specific design.</li> </ul> </li> </ul> <h3 id=step-4-define-modules>Step 4: Define modules<a class=headerlink href=#step-4-define-modules title="Permanent link">&para;</a></h3> <ul> <li> <p>Each aggregate will be implemented as some composition of:</p> <ol> <li>a command microservice managing state changes to the entities in this aggregate</li> <li>possibly one or more separate (CQRS) query services providing internal or external API query capabilities</li> <li>additional simulation, predictive analytics or User Interface microservices</li> </ol> </li> <li> <p>The command microservice will be built around a collection of active entities for the aggregate, keyed by some primary key.</p> </li> <li>The separation of each aggregate into specific component microservices as outlined above, will be a complete list of microservices for the build / sprint.</li> <li>Identify the data collections, and collection organization (keying structure) in each command and query microservice for this build.</li> </ul> <h3 id=step-5-limit-the-context-and-scope-for-this-particular-build-sprint>Step 5: Limit the context and scope for this particular build / sprint<a class=headerlink href=#step-5-limit-the-context-and-scope-for-this-particular-build-sprint title="Permanent link">&para;</a></h3> <p>We assume that we are developing a particular build for a sprint within some agile development approach, deferring additional functions and complexity to later sprints:</p> <ul> <li>Working from the initial list of aggregates, select which aggregates will be included in this build</li> <li> <p>For each aggregate the possible choices are:</p> <ol> <li>to completely skip and workaround the aggregate in this build.</li> <li>to include a full lifecycle implementation of the aggregate</li> <li>to provide a simplified lifecycle implementation - typically a table of entities is initialized at start up, and state changes to existing entities are tracked</li> </ol> </li> <li> <p>Determine whether there are simulation services or predictive analytics service to be included in the build</p> </li> <li>Identify the external query APIs and command APIs which this build should support</li> <li>Create entity lifecycle diagrams for entites having a full lifecycle implementation in this build / sprint.</li> </ul> <h3 id=step-6-generate-microservice-interaction-diagrams-for-the-build>Step 6: Generate microservice interaction diagrams for the build<a class=headerlink href=#step-6-generate-microservice-interaction-diagrams-for-the-build title="Permanent link">&para;</a></h3> <ul> <li>The diagram will show API calls initiating state change. They should map the commands discovered during the event storming sessions.</li> <li>It shows for each interaction whether this is a synchronous API calls or an asynchronous event interaction via the event backbone.</li> <li>The diagram labels each specific event interaction between microservices trigerring a state change.</li> <li>Typically queries are synchronous API calls since the caller cannot usefully proceed until a result is returned.</li> <li> <p>From these, we can extract:</p> <ol> <li>a complete list of event types on each event backbone topic, with information passed on each event type.</li> <li>the complete list of “logic segments” for each microservice processing action in response to an API call or initiating event.</li> </ol> </li> <li> <p>When, at the next level of detail, the individual fields in each event are specified and typed, the <a href=https://github.com/cloudevents/spec>CloudEvents standard</a> may be used as a starting point.</p> </li> </ul> <h3 id=step-7-test-drivent-development-meets-ddd>Step 7: Test Drivent Development meets DDD<a class=headerlink href=#step-7-test-drivent-development-meets-ddd title="Permanent link">&para;</a></h3> <p>Test Driven Development is a well established practice to develop software efficiently. Since 2003 and extreme programming practice, it helps when doing refactoring, improve code quality and focus on simple design. As Dan North stated in 2018, it could have been bettwe name 'Example Guided Design' as starting by the test improve the design, and writing tests that map example and end user stories will make it more clear and mapped to the requirements. With DDD, TDD needs to support the ubiquituous language and have tests intent clearly stated. We can easily adopt the following practices:</p> <ul> <li>Isolate tests per bounded context</li> <li>Adopt collective ownership of code and tests</li> <li>Pair programming between tester and developer</li> <li>Enforce contunuous feedbacks</li> <li>Keep tests in source control with the code and for integration tests in a dedicated folder or even repository. Have their executions as part of CI/CD pipeline.</li> <li>Write test with te Gherkin syntax:</li> </ul> <div class="language-text highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>Feature: title of the scenario or test method
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>Given [initial context]
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>When [event or trigger]
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>then [expected output]
</span></code></pre></div> <p>Here is an example of such structure in Junit 5 test:</p> <div class="language-java highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=kd>public</span><span class=w> </span><span class=kt>void</span><span class=w> </span><span class=nf>given_order_created_should_emit_event</span><span class=p>()</span><span class=w> </span><span class=kd>throws</span><span class=w> </span><span class=n>OrderCreationException</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>    </span><span class=n>assume_there_is_no_event_emitted</span><span class=p>();</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>    </span><span class=n>OrderEventPayload</span><span class=w> </span><span class=n>new_order</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ShippingOrderTestDataFactory</span><span class=p>.</span><span class=na>given_a_new_order</span><span class=p>();</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>    </span><span class=c1>// when</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=w>    </span><span class=n>service</span><span class=p>.</span><span class=na>createOrder</span><span class=p>(</span><span class=n>new_order</span><span class=p>);</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=w>    </span><span class=c1>// then</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=w>    </span><span class=n>assertTrue</span><span class=p>(</span><span class=n>order_created_event_generated</span><span class=p>());</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=w>    </span><span class=n>OrderCommandEvent</span><span class=w> </span><span class=n>createdOrderEvent</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>OrderCommandEvent</span><span class=p>)</span><span class=n>commandEventProducer</span><span class=p>.</span><span class=na>getEventEmitted</span><span class=p>();</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=w>    </span><span class=n>assertTrue</span><span class=p>(</span><span class=n>new_order</span><span class=p>.</span><span class=na>getOrderID</span><span class=p>().</span><span class=na>equals</span><span class=p>(((</span><span class=n>OrderEventPayload</span><span class=p>)</span><span class=n>createdOrderEvent</span><span class=p>.</span><span class=na>getPayload</span><span class=p>()).</span><span class=na>getOrderID</span><span class=p>()));</span>
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a><span class=p>}</span>
</span></code></pre></div> <h3 id=step-8-address-failover-and-other-nfrs>Step 8: Address failover and other NFRs<a class=headerlink href=#step-8-address-failover-and-other-nfrs title="Permanent link">&para;</a></h3> <p>Non-Functional Requirements impact architecture decision, technology choices and coding. So address those NFRs as early as possible during requirements and analysis and then design phases. </p> <ul> <li>If a microservice fails it will need to recover its internal state by reloading data from one or more topics, from the latest committed read.</li> <li>In general, command and query microservices will have a standard pattern for doing this.</li> <li>Any custom event filtering and service specific logic should be specified.</li> </ul> <h2 id=concepts-and-rationale-underlying-the-design-approach>Concepts and rationale underlying the design approach<a class=headerlink href=#concepts-and-rationale-underlying-the-design-approach title="Permanent link">&para;</a></h2> <p><em>What is the difference between event information stored in the event backbone and state data stored in the microservices?</em></p> <p>The event information stored persistently in the event backbone is organized by topic and, within each topic, entirely by event time-of-occurrence. While the state information in a microservice is a list (collection) of all <strong>currently active</strong> entities of the owning aggregate (e.g. all orders, all car rides etc) and the <strong>current</strong> state of each such entity. The entity records are keyed by primary key, like an OrderID. While implementing microservice using event sourcing, CQRS, the persisted entity records are complementary to the historically organized information in the event backbone.</p> <p><em>When is it acceptable to be using synchronous interactions between services instead of asynchronous event interacts through the event backbone?</em></p> <p>For non-state-changing queries, for which the response is always instantaneously available a synchronous query call may be acceptable and will provide a simpler more understandable interface. Any processing which can be though of as being triggered by some state change in another aggregate should be modelled with an asynchronous event, because as the solution evolves other new microservices may also need to be aware of such event. We do not want to have to go back and change logic in existing service where this event originated to have that microservice actively report the event to all potential consumers.</p> <p><em>How do we save microservices from having to maintain data collections with complex secondary indexing for which eventual consistency will be hard to implement?</em></p> <ul> <li>Each command microservice should do all its state changing updates using the primary key lookup only for its entities.</li> <li>Each asynchronous event interaction between microservices should carry primary entityIds ( orderID, VoyageID, shipID) for any entities associated with the interaction.</li> <li>Each query which might require speciaoized secondary indexing to respond to queries can be implemented in a separate CQRS query service which subscribes to events to do all internal updating and receives events from the event backbone in a ( Consistent) eventually correct order.</li> <li>This allows for recovery of any failed service by rebuilding it in "eventually correct" order.</li> </ul> <h2 id=more-reading-and-sources>More reading and sources<a class=headerlink href=#more-reading-and-sources title="Permanent link">&para;</a></h2> <ul> <li><a href="https://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215/ref=asc_df_0321125215">Eric Evans' book</a></li> <li><a href="https://www.amazon.com/Patterns-Principles-Practices-Domain-Driven-Design/dp/1118714709/ref=sr_1_3">Scott Millet and Nick Tune's book: "Patterns, Principles, and Practices of Domain-Driven Design"</a></li> <li><a href=https://www.ibm.com/garage/method/practices/code/domain-driven-design/ >Kyle Brown's article: Apply Domain-Driven Design to microservices architecture</a></li> </ul> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../event-storming/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Event Storming"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Event Storming </div> </div> </a> <a href=eda_assessment/ class="md-footer__link md-footer__link--next" aria-label="Next: EDA Assessment"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> EDA Assessment </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2018 - 2024 Jerome Boyer </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/jbcodeforce target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://linkedin.com/in/jeromeboyer target=_blank rel=noopener title=linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href target=_blank rel=noopener title class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.8l167.6-182.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "../..", "features": ["content.code.annotate", "content.tooltips", "content.code.copy", "search.highlight", "navigation.instant", "navigation.instant.progress", "navigation.tabs", "navigation.tabs.sticky", "navigation.instant", "navigation.tracking", "navigation.sections", "navigation.expand", "navigation.top", "navigation.footer"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../assets/javascripts/bundle.13a4f30d.min.js></script> <script src=../../javascripts/mathjax.js></script> <script src=https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js></script> </body> </html>